<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="A discovery service which publishes and resolves node information using a pkarr relay."><title>iroh::discovery::pkarr - Rust</title><script>if(window.location.protocol!=="file:")document.head.insertAdjacentHTML("beforeend","SourceSerif4-Regular-46f98efaafac5295.ttf.woff2,FiraSans-Regular-018c141bf0843ffd.woff2,FiraSans-Medium-8f9a781e4970d388.woff2,SourceCodePro-Regular-562dcc5011b6de7d.ttf.woff2,SourceCodePro-Semibold-d899c5a5c4aeb14a.ttf.woff2".split(",").map(f=>`<link rel="preload" as="font" type="font/woff2" crossorigin href="../../../static.files/${f}">`).join(""))</script><link rel="stylesheet" href="../../../static.files/normalize-76eba96aa4d2e634.css"><link rel="stylesheet" href="../../../static.files/rustdoc-b21aa549bf6d91ff.css"><meta name="rustdoc-vars" data-root-path="../../../" data-static-root-path="../../../static.files/" data-current-crate="iroh" data-themes="" data-resource-suffix="" data-rustdoc-version="1.80.0-nightly (c987ad527 2024-05-01)" data-channel="nightly" data-search-js="search-bf21c90c8c1d92b1.js" data-settings-js="settings-4313503d2e1961c2.js" ><script src="../../../static.files/storage-e32f0c247825364d.js"></script><script defer src="../sidebar-items.js"></script><script defer src="../../../static.files/main-20a3ad099b048cf2.js"></script><noscript><link rel="stylesheet" href="../../../static.files/noscript-09095024cf37855e.css"></noscript><link rel="alternate icon" type="image/png" href="../../../static.files/favicon-32x32-422f7d1d52889060.png"><link rel="icon" type="image/svg+xml" href="../../../static.files/favicon-2c020d218678b618.svg"></head><body class="rustdoc mod"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle" title="show sidebar"></button></nav><nav class="sidebar"><div class="sidebar-crate"><h2><a href="../../../iroh/index.html">iroh</a><span class="version">0.29.0</span></h2></div><h2 class="location"><a href="#">Module pkarr</a></h2><div class="sidebar-elems"><section><ul class="block"><li><a href="#modules">Modules</a></li><li><a href="#structs">Structs</a></li><li><a href="#constants">Constants</a></li></ul></section><h2><a href="../index.html">In iroh::discovery</a></h2></div></nav><div class="sidebar-resizer"></div><main><div class="width-limiter"><nav class="sub"><form class="search-form"><span></span><div id="sidebar-button" tabindex="-1"><a href="../../../iroh/all.html" title="show sidebar"></a></div><input class="search-input" name="search" aria-label="Run search in the documentation" autocomplete="off" spellcheck="false" placeholder="Type ‘S’ or ‘/’ to search, ‘?’ for more options…" type="search"><div id="help-button" tabindex="-1"><a href="../../../help.html" title="help">?</a></div><div id="settings-menu" tabindex="-1"><a href="../../../settings.html" title="settings">Settings</a></div></form></nav><section id="main-content" class="content"><div class="main-heading"><h1>Module <a href="../../index.html">iroh</a>::<wbr><a href="../index.html">discovery</a>::<wbr><a class="mod" href="#">pkarr</a><button id="copy-path" title="Copy item path to clipboard">Copy item path</button></h1><span class="out-of-band"><a class="src" href="../../../src/iroh/discovery/pkarr.rs.html#1-421">source</a> · <button id="toggle-all-docs" title="collapse all docs">[<span>&#x2212;</span>]</button></span></div><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>A discovery service which publishes and resolves node information using a <a href="https://pkarr.org">pkarr</a> relay.</p>
<p>Public-Key Addressable Resource Records, <a href="https://pkarr.org">pkarr</a>, is a system which allows publishing
<a href="https://en.wikipedia.org/wiki/Domain_Name_System#Resource_records">DNS Resource Records</a> owned by a particular <a href="../../key/struct.SecretKey.html" title="struct iroh::key::SecretKey"><code>SecretKey</code></a> under a name derived from its
corresponding <a href="../../key/struct.PublicKey.html" title="struct iroh::key::PublicKey"><code>PublicKey</code></a>, also known as the <a href="../../type.NodeId.html" title="type iroh::NodeId"><code>NodeId</code></a>.  Additionally this pkarr
Resource Record is signed using the same <a href="../../key/struct.SecretKey.html" title="struct iroh::key::SecretKey"><code>SecretKey</code></a>, ensuring authenticity of the
record.</p>
<p>Pkarr normally stores these records on the <a href="https://en.wikipedia.org/wiki/Mainline_DHT">Mainline DHT</a>, but also provides two bridges
that do not require clients to directly interact with the DHT:</p>
<ul>
<li>
<p>Resolvers are servers which expose the pkarr Resource Record under a domain name,
e.g. <code>o3dks..6uyy.dns.iroh.link</code>.  This allows looking up the pkarr Resource Records
using normal DNS clients.  These resolvers would normally perform lookups on the
Mainline DHT augmented with a local cache to improve performance.</p>
</li>
<li>
<p>Relays are servers which allow both publishing and looking up of the pkarr Resource
Records using HTTP PUT and GET requests.  They will usually perform the publishing to
the Mainline DHT on behalf on the client as well as cache lookups performed on the DHT
to improve performance.</p>
</li>
</ul>
<p>For node discovery in iroh the pkarr Resource Records contain the <a href="../../struct.AddrInfo.html" title="struct iroh::AddrInfo"><code>AddrInfo</code></a>
information, providing nodes which retrieve the pkarr Resource Record with enough detail
to contact the iroh node.</p>
<p>There are several node discovery services built on top of pkarr, which can be composed
to the application’s needs:</p>
<ul>
<li>
<p><a href="struct.PkarrPublisher.html" title="struct iroh::discovery::pkarr::PkarrPublisher"><code>PkarrPublisher</code></a>, which publishes to a pkarr relay server using HTTP.</p>
</li>
<li>
<p><a href="struct.PkarrResolver.html" title="struct iroh::discovery::pkarr::PkarrResolver"><code>PkarrResolver</code></a>, which resolves from a pkarr relay server using HTTP.</p>
</li>
<li>
<p><a href="../dns/struct.DnsDiscovery.html" title="struct iroh::discovery::dns::DnsDiscovery"><code>DnsDiscovery</code></a>, which resolves from a DNS server.</p>
</li>
<li>
<p><a href="dht/struct.DhtDiscovery.html" title="struct iroh::discovery::pkarr::dht::DhtDiscovery"><code>DhtDiscovery</code></a>, which resolves and publishes from both pkarr relay servers and well
as the Mainline DHT.</p>
</li>
</ul>
</div></details><h2 id="modules" class="section-header">Modules<a href="#modules" class="anchor">§</a></h2><ul class="item-table"><li><div class="item-name"><a class="mod" href="dht/index.html" title="mod iroh::discovery::pkarr::dht">dht</a><span class="stab portability" title="Available on crate feature `discovery-pkarr-dht` only"><code>discovery-pkarr-dht</code></span></div><div class="desc docblock-short">Pkarr based node discovery for iroh, supporting both relay servers and the DHT.</div></li></ul><h2 id="structs" class="section-header">Structs<a href="#structs" class="anchor">§</a></h2><ul class="item-table"><li><div class="item-name"><a class="struct" href="struct.PkarrPublisher.html" title="struct iroh::discovery::pkarr::PkarrPublisher">PkarrPublisher</a></div><div class="desc docblock-short">Publisher of node discovery information to a <a href="https://pkarr.org">pkarr</a> relay.</div></li><li><div class="item-name"><a class="struct" href="struct.PkarrRelayClient.html" title="struct iroh::discovery::pkarr::PkarrRelayClient">PkarrRelayClient</a></div><div class="desc docblock-short">A <a href="https://pkarr.org">pkarr</a> client to publish [<code>pkarr::SignedPacket</code>]s to a pkarr relay.</div></li><li><div class="item-name"><a class="struct" href="struct.PkarrResolver.html" title="struct iroh::discovery::pkarr::PkarrResolver">PkarrResolver</a></div><div class="desc docblock-short">Resolver of node discovery information from a <a href="https://pkarr.org">pkarr</a> relay.</div></li></ul><h2 id="constants" class="section-header">Constants<a href="#constants" class="anchor">§</a></h2><ul class="item-table"><li><div class="item-name"><a class="constant" href="constant.DEFAULT_PKARR_TTL.html" title="constant iroh::discovery::pkarr::DEFAULT_PKARR_TTL">DEFAULT_PKARR_TTL</a></div><div class="desc docblock-short">Default TTL for the records in the pkarr signed packet.</div></li><li><div class="item-name"><a class="constant" href="constant.DEFAULT_REPUBLISH_INTERVAL.html" title="constant iroh::discovery::pkarr::DEFAULT_REPUBLISH_INTERVAL">DEFAULT_REPUBLISH_INTERVAL</a></div><div class="desc docblock-short">Interval in which to republish the node info even if unchanged: 5 minutes.</div></li><li><div class="item-name"><a class="constant" href="constant.N0_DNS_PKARR_RELAY_PROD.html" title="constant iroh::discovery::pkarr::N0_DNS_PKARR_RELAY_PROD">N0_DNS_PKARR_RELAY_PROD</a></div><div class="desc docblock-short">The production pkarr relay run by <a href="https://n0.computer">number 0</a>.</div></li><li><div class="item-name"><a class="constant" href="constant.N0_DNS_PKARR_RELAY_STAGING.html" title="constant iroh::discovery::pkarr::N0_DNS_PKARR_RELAY_STAGING">N0_DNS_PKARR_RELAY_STAGING</a></div><div class="desc docblock-short">The testing pkarr relay run by <a href="https://n0.computer">number 0</a>.</div></li></ul></section></div></main></body></html>