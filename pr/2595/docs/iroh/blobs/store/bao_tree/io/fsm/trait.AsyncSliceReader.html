<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="A trait to abstract async reading from different resource."><title>AsyncSliceReader in iroh::blobs::store::bao_tree::io::fsm - Rust</title><script>if(window.location.protocol!=="file:")document.head.insertAdjacentHTML("beforeend","SourceSerif4-Regular-46f98efaafac5295.ttf.woff2,FiraSans-Regular-018c141bf0843ffd.woff2,FiraSans-Medium-8f9a781e4970d388.woff2,SourceCodePro-Regular-562dcc5011b6de7d.ttf.woff2,SourceCodePro-Semibold-d899c5a5c4aeb14a.ttf.woff2".split(",").map(f=>`<link rel="preload" as="font" type="font/woff2" crossorigin href="../../../../../../static.files/${f}">`).join(""))</script><link rel="stylesheet" href="../../../../../../static.files/normalize-76eba96aa4d2e634.css"><link rel="stylesheet" href="../../../../../../static.files/rustdoc-b21aa549bf6d91ff.css"><meta name="rustdoc-vars" data-root-path="../../../../../../" data-static-root-path="../../../../../../static.files/" data-current-crate="iroh" data-themes="" data-resource-suffix="" data-rustdoc-version="1.80.0-nightly (c987ad527 2024-05-01)" data-channel="nightly" data-search-js="search-bf21c90c8c1d92b1.js" data-settings-js="settings-4313503d2e1961c2.js" ><script src="../../../../../../static.files/storage-e32f0c247825364d.js"></script><script defer src="sidebar-items.js"></script><script defer src="../../../../../../static.files/main-20a3ad099b048cf2.js"></script><noscript><link rel="stylesheet" href="../../../../../../static.files/noscript-09095024cf37855e.css"></noscript><link rel="alternate icon" type="image/png" href="../../../../../../static.files/favicon-32x32-422f7d1d52889060.png"><link rel="icon" type="image/svg+xml" href="../../../../../../static.files/favicon-2c020d218678b618.svg"></head><body class="rustdoc trait"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle" title="show sidebar"></button></nav><nav class="sidebar"><div class="sidebar-crate"><h2><a href="../../../../../../iroh/index.html">iroh</a><span class="version">0.22.0</span></h2></div><h2 class="location"><a href="#">AsyncSliceReader</a></h2><div class="sidebar-elems"><section><h3><a href="#required-methods">Required Methods</a></h3><ul class="block"><li><a href="#tymethod.read_at">read_at</a></li><li><a href="#tymethod.size">size</a></li></ul><h3><a href="#foreign-impls">Implementations on Foreign Types</a></h3><ul class="block"><li><a href="#impl-AsyncSliceReader-for-%26mut+T">&amp;&#x27;b mut T</a></li><li><a href="#impl-AsyncSliceReader-for-%26%5Bu8%5D">&amp;[u8]</a></li><li><a href="#impl-AsyncSliceReader-for-Box%3CT%3E">Box&lt;T&gt;</a></li><li><a href="#impl-AsyncSliceReader-for-Bytes">Bytes</a></li><li><a href="#impl-AsyncSliceReader-for-BytesMut">BytesMut</a></li></ul><h3><a href="#object-safety">Object Safety</a></h3><h3><a href="#implementors">Implementors</a></h3></section><h2><a href="index.html">In iroh::blobs::store::bao_tree::io::fsm</a></h2></div></nav><div class="sidebar-resizer"></div><main><div class="width-limiter"><nav class="sub"><form class="search-form"><span></span><div id="sidebar-button" tabindex="-1"><a href="../../../../../../iroh/all.html" title="show sidebar"></a></div><input class="search-input" name="search" aria-label="Run search in the documentation" autocomplete="off" spellcheck="false" placeholder="Type ‘S’ or ‘/’ to search, ‘?’ for more options…" type="search"><div id="help-button" tabindex="-1"><a href="../../../../../../help.html" title="help">?</a></div><div id="settings-menu" tabindex="-1"><a href="../../../../../../settings.html" title="settings">Settings</a></div></form></nav><section id="main-content" class="content"><div class="main-heading"><h1>Trait <a href="../../../../../index.html">iroh</a>::<wbr><a href="../../../../index.html">blobs</a>::<wbr><a href="../../../index.html">store</a>::<wbr><a href="../../index.html">bao_tree</a>::<wbr><a href="../index.html">io</a>::<wbr><a href="index.html">fsm</a>::<wbr><a class="trait" href="#">AsyncSliceReader</a><button id="copy-path" title="Copy item path to clipboard">Copy item path</button></h1><span class="out-of-band"><button id="toggle-all-docs" title="collapse all docs">[<span>&#x2212;</span>]</button></span></div><pre class="rust item-decl"><code>pub trait AsyncSliceReader {
    // Required methods
    fn <a href="#tymethod.read_at" class="fn">read_at</a>(
        &amp;mut self,
        offset: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.u64.html">u64</a>,
        len: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.usize.html">usize</a>
    ) -&gt; impl <a class="trait" href="https://doc.rust-lang.org/nightly/core/future/future/trait.Future.html" title="trait core::future::future::Future">Future</a>&lt;Output = <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;Bytes, <a class="struct" href="https://doc.rust-lang.org/nightly/std/io/error/struct.Error.html" title="struct std::io::error::Error">Error</a>&gt;&gt;;
<span class="item-spacer"></span>    fn <a href="#tymethod.size" class="fn">size</a>(&amp;mut self) -&gt; impl <a class="trait" href="https://doc.rust-lang.org/nightly/core/future/future/trait.Future.html" title="trait core::future::future::Future">Future</a>&lt;Output = <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.u64.html">u64</a>, <a class="struct" href="https://doc.rust-lang.org/nightly/std/io/error/struct.Error.html" title="struct std::io::error::Error">Error</a>&gt;&gt;;
}</code></pre><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>A trait to abstract async reading from different resource.</p>
<p>This trait does not require the notion of a current position, but instead
requires explicitly passing the offset to read_at. In addition to the ability
to read at an arbitrary offset, it also provides the ability to get the
length of the resource.</p>
<p>This is similar to the io interface of sqlite.
See xRead, xFileSize in <a href="https://www.sqlite.org/c3ref/io_methods.html">https://www.sqlite.org/c3ref/io_methods.html</a></p>
</div></details><h2 id="required-methods" class="section-header">Required Methods<a href="#required-methods" class="anchor">§</a></h2><div class="methods"><details class="toggle method-toggle" open><summary><section id="tymethod.read_at" class="method"><h4 class="code-header">fn <a href="#tymethod.read_at" class="fn">read_at</a>(
    &amp;mut self,
    offset: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.u64.html">u64</a>,
    len: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.usize.html">usize</a>
) -&gt; impl <a class="trait" href="https://doc.rust-lang.org/nightly/core/future/future/trait.Future.html" title="trait core::future::future::Future">Future</a>&lt;Output = <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;Bytes, <a class="struct" href="https://doc.rust-lang.org/nightly/std/io/error/struct.Error.html" title="struct std::io::error::Error">Error</a>&gt;&gt;</h4></section></summary><div class="docblock"><p>Read the entire buffer at the given position.</p>
<p>Will return at most <code>len</code> bytes, but may return fewer if the resource is smaller.
If the range is completely covered by the resource, will return exactly <code>len</code> bytes.
If the range is not covered at all by the resource, will return an empty buffer.
It will never return an io error independent of the range as long as the underlying
resource is valid.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="tymethod.size" class="method"><h4 class="code-header">fn <a href="#tymethod.size" class="fn">size</a>(&amp;mut self) -&gt; impl <a class="trait" href="https://doc.rust-lang.org/nightly/core/future/future/trait.Future.html" title="trait core::future::future::Future">Future</a>&lt;Output = <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.u64.html">u64</a>, <a class="struct" href="https://doc.rust-lang.org/nightly/std/io/error/struct.Error.html" title="struct std::io::error::Error">Error</a>&gt;&gt;</h4></section></summary><div class="docblock"><p>Get the length of the resource</p>
</div></details></div><h2 id="object-safety" class="section-header">Object Safety<a href="#object-safety" class="anchor">§</a></h2><div class="object-safety-info">This trait is <b>not</b> <a href="https://doc.rust-lang.org/nightly/reference/items/traits.html#object-safety">object safe</a>.</div><h2 id="foreign-impls" class="section-header">Implementations on Foreign Types<a href="#foreign-impls" class="anchor">§</a></h2><details class="toggle implementors-toggle"><summary><section id="impl-AsyncSliceReader-for-%26%5Bu8%5D" class="impl"><a href="#impl-AsyncSliceReader-for-%26%5Bu8%5D" class="anchor">§</a><h3 class="code-header">impl <a class="trait" href="trait.AsyncSliceReader.html" title="trait iroh::blobs::store::bao_tree::io::fsm::AsyncSliceReader">AsyncSliceReader</a> for &amp;[<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.u8.html">u8</a>]</h3></section></summary><div class="impl-items"><section id="method.read_at" class="method trait-impl"><a href="#method.read_at" class="anchor">§</a><h4 class="code-header">async fn <a href="#tymethod.read_at" class="fn">read_at</a>(&amp;mut self, offset: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.u64.html">u64</a>, len: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.usize.html">usize</a>) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;Bytes, <a class="struct" href="https://doc.rust-lang.org/nightly/std/io/error/struct.Error.html" title="struct std::io::error::Error">Error</a>&gt;</h4></section><section id="method.size" class="method trait-impl"><a href="#method.size" class="anchor">§</a><h4 class="code-header">async fn <a href="#tymethod.size" class="fn">size</a>(&amp;mut self) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.u64.html">u64</a>, <a class="struct" href="https://doc.rust-lang.org/nightly/std/io/error/struct.Error.html" title="struct std::io::error::Error">Error</a>&gt;</h4></section></div></details><details class="toggle implementors-toggle"><summary><section id="impl-AsyncSliceReader-for-Bytes" class="impl"><a href="#impl-AsyncSliceReader-for-Bytes" class="anchor">§</a><h3 class="code-header">impl <a class="trait" href="trait.AsyncSliceReader.html" title="trait iroh::blobs::store::bao_tree::io::fsm::AsyncSliceReader">AsyncSliceReader</a> for Bytes</h3></section></summary><div class="impl-items"><section id="method.read_at-1" class="method trait-impl"><a href="#method.read_at-1" class="anchor">§</a><h4 class="code-header">async fn <a href="#tymethod.read_at" class="fn">read_at</a>(&amp;mut self, offset: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.u64.html">u64</a>, len: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.usize.html">usize</a>) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;Bytes, <a class="struct" href="https://doc.rust-lang.org/nightly/std/io/error/struct.Error.html" title="struct std::io::error::Error">Error</a>&gt;</h4></section><section id="method.size-1" class="method trait-impl"><a href="#method.size-1" class="anchor">§</a><h4 class="code-header">async fn <a href="#tymethod.size" class="fn">size</a>(&amp;mut self) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.u64.html">u64</a>, <a class="struct" href="https://doc.rust-lang.org/nightly/std/io/error/struct.Error.html" title="struct std::io::error::Error">Error</a>&gt;</h4></section></div></details><details class="toggle implementors-toggle"><summary><section id="impl-AsyncSliceReader-for-BytesMut" class="impl"><a href="#impl-AsyncSliceReader-for-BytesMut" class="anchor">§</a><h3 class="code-header">impl <a class="trait" href="trait.AsyncSliceReader.html" title="trait iroh::blobs::store::bao_tree::io::fsm::AsyncSliceReader">AsyncSliceReader</a> for BytesMut</h3></section></summary><div class="impl-items"><section id="method.read_at-2" class="method trait-impl"><a href="#method.read_at-2" class="anchor">§</a><h4 class="code-header">async fn <a href="#tymethod.read_at" class="fn">read_at</a>(&amp;mut self, offset: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.u64.html">u64</a>, len: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.usize.html">usize</a>) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;Bytes, <a class="struct" href="https://doc.rust-lang.org/nightly/std/io/error/struct.Error.html" title="struct std::io::error::Error">Error</a>&gt;</h4></section><section id="method.size-2" class="method trait-impl"><a href="#method.size-2" class="anchor">§</a><h4 class="code-header">async fn <a href="#tymethod.size" class="fn">size</a>(&amp;mut self) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.u64.html">u64</a>, <a class="struct" href="https://doc.rust-lang.org/nightly/std/io/error/struct.Error.html" title="struct std::io::error::Error">Error</a>&gt;</h4></section></div></details><details class="toggle implementors-toggle"><summary><section id="impl-AsyncSliceReader-for-%26mut+T" class="impl"><a href="#impl-AsyncSliceReader-for-%26mut+T" class="anchor">§</a><h3 class="code-header">impl&lt;'b, T&gt; <a class="trait" href="trait.AsyncSliceReader.html" title="trait iroh::blobs::store::bao_tree::io::fsm::AsyncSliceReader">AsyncSliceReader</a> for <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.reference.html">&amp;'b mut T</a><div class="where">where
    T: <a class="trait" href="trait.AsyncSliceReader.html" title="trait iroh::blobs::store::bao_tree::io::fsm::AsyncSliceReader">AsyncSliceReader</a>,</div></h3></section></summary><div class="impl-items"><section id="method.read_at-3" class="method trait-impl"><a href="#method.read_at-3" class="anchor">§</a><h4 class="code-header">async fn <a href="#tymethod.read_at" class="fn">read_at</a>(&amp;mut self, offset: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.u64.html">u64</a>, len: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.usize.html">usize</a>) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;Bytes, <a class="struct" href="https://doc.rust-lang.org/nightly/std/io/error/struct.Error.html" title="struct std::io::error::Error">Error</a>&gt;</h4></section><section id="method.size-3" class="method trait-impl"><a href="#method.size-3" class="anchor">§</a><h4 class="code-header">async fn <a href="#tymethod.size" class="fn">size</a>(&amp;mut self) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.u64.html">u64</a>, <a class="struct" href="https://doc.rust-lang.org/nightly/std/io/error/struct.Error.html" title="struct std::io::error::Error">Error</a>&gt;</h4></section></div></details><details class="toggle implementors-toggle"><summary><section id="impl-AsyncSliceReader-for-Box%3CT%3E" class="impl"><a href="#impl-AsyncSliceReader-for-Box%3CT%3E" class="anchor">§</a><h3 class="code-header">impl&lt;T&gt; <a class="trait" href="trait.AsyncSliceReader.html" title="trait iroh::blobs::store::bao_tree::io::fsm::AsyncSliceReader">AsyncSliceReader</a> for <a class="struct" href="https://doc.rust-lang.org/nightly/alloc/boxed/struct.Box.html" title="struct alloc::boxed::Box">Box</a>&lt;T&gt;<div class="where">where
    T: <a class="trait" href="trait.AsyncSliceReader.html" title="trait iroh::blobs::store::bao_tree::io::fsm::AsyncSliceReader">AsyncSliceReader</a>,</div></h3></section></summary><div class="impl-items"><section id="method.read_at-4" class="method trait-impl"><a href="#method.read_at-4" class="anchor">§</a><h4 class="code-header">async fn <a href="#tymethod.read_at" class="fn">read_at</a>(&amp;mut self, offset: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.u64.html">u64</a>, len: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.usize.html">usize</a>) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;Bytes, <a class="struct" href="https://doc.rust-lang.org/nightly/std/io/error/struct.Error.html" title="struct std::io::error::Error">Error</a>&gt;</h4></section><section id="method.size-4" class="method trait-impl"><a href="#method.size-4" class="anchor">§</a><h4 class="code-header">async fn <a href="#tymethod.size" class="fn">size</a>(&amp;mut self) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.u64.html">u64</a>, <a class="struct" href="https://doc.rust-lang.org/nightly/std/io/error/struct.Error.html" title="struct std::io::error::Error">Error</a>&gt;</h4></section></div></details><h2 id="implementors" class="section-header">Implementors<a href="#implementors" class="anchor">§</a></h2><div id="implementors-list"><section id="impl-AsyncSliceReader-for-File" class="impl"><a href="#impl-AsyncSliceReader-for-File" class="anchor">§</a><h3 class="code-header">impl <a class="trait" href="trait.AsyncSliceReader.html" title="trait iroh::blobs::store::bao_tree::io::fsm::AsyncSliceReader">AsyncSliceReader</a> for File</h3></section><section id="impl-AsyncSliceReader-for-TrackingSliceReader%3CR%3E" class="impl"><a href="#impl-AsyncSliceReader-for-TrackingSliceReader%3CR%3E" class="anchor">§</a><h3 class="code-header">impl&lt;R&gt; <a class="trait" href="trait.AsyncSliceReader.html" title="trait iroh::blobs::store::bao_tree::io::fsm::AsyncSliceReader">AsyncSliceReader</a> for TrackingSliceReader&lt;R&gt;<div class="where">where
    R: <a class="trait" href="trait.AsyncSliceReader.html" title="trait iroh::blobs::store::bao_tree::io::fsm::AsyncSliceReader">AsyncSliceReader</a>,</div></h3></section></div><script src="../../../../../../trait.impl/iroh_io/trait.AsyncSliceReader.js" data-ignore-extern-crates="iroh_io,alloc,std,bytes" async></script></section></div></main></body></html>